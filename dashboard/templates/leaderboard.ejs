<%- include("partials/header", { bot, user, path, query, title: "Home" }) %>

<% if (alert) { %>
  <div class="bg-indigo-600 rounded-md mb-4 -mt-6">
    <div class="max-w-7xl mx-auto py-3 px-3 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between flex-wrap">
        <div class="w-0 flex-1 flex items-center">
          <span class="flex p-2 rounded-lg bg-indigo-800">
            <!-- Heroicon name: speakerphone -->
            <svg class="h-6 w-6 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z" />
            </svg>
          </span>
          <p class="ml-3 font-medium text-white truncate">
            <span class="md:hidden">
              <%= alert %>
            </span>
            <span class="hidden md:inline">
              <%= alert %>
            </span>
          </p>
        </div>
      </div>
    </div>
  </div>
<% } %>

    <div class='flex flex-col mxauto'>
        <% levels.forEach(user => { 
            if(user.user) { %>
            <div
              class="flex rounded-full relative avatar text-purple-600 bg-purple-200 text-purple-100 ring-white">
              <img class="justify-self-start w-0 md:w-24 inline rounded-full relative" src="<%= `https://cdn.discordapp.com/avatars/${user.user.id}/${user.user.avatar}` %>"
                alt="">
              <div class="place-self-center w-8/12 flex-auto inline mb-2 mt-2"><span class="mr-2"></span><b class="text-xl md:text-3xl"><%= user.user.username %></b><span class="ml-2"><br><span class="mr-2"></span>Total XP: <b><%= user.totalxp %></b><span class="ml-2"></span></div>
              <div class="place-self-center flex-auto inline mb-2 mt-2"><b>XP: </b><%= user.xp  %> / <%= 5 * (Math.pow(user.level,2)) + (50 * user.level) + 100 %></div>
              <div class="justify-self-end w-24 inline rounded-full">
                <svg class="z-10 absolute w-24 h-24">
                  <g>
                    <circle style="transition: 0.35s stroke-dashoffset; transform: rotate(-90deg); transform-origin: 50% 50%; stroke-dasharray: 251.327412 251.327412; stroke-dashoffset: <%= Math.abs((user.xp / (5 * (Math.pow(user.level,2)) + (50 * user.level) + 100))*251 - 251) %>;" class="progress-ring__circle" stroke="white" stroke-width="4" fill="transparent" r="40" cx="48" cy="48" />
                    <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-family="Verdana" font-size="28" fill="cyan"><%= user.level %></text>
                  </g>
                </svg>
                <img style="filter: brightness(10%) blur(2px);" class="z-0 w-24 inline rounded-full relative" src="<%= `https://cdn.discordapp.com/avatars/${user.user.id}/${user.user.avatar}` %>"
                alt="">
                
              </div>
            </div>
            <div class="mb-2 mt-2"><span class="mr-2"></span><span class="ml-2"></span></div>
            
        <% }}); %>
    </div>

<%- include("partials/footer") %>
